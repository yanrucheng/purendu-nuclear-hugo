{{ define "main" }}
  {{ $lang := .Site.Language.Lang }}
  {{ $data := .Site.Data.homepage }}
  {{ with $data }}
    {{ $langData := or (index . $lang) (index . "en") }}
    {{ with $langData }}
    <section class="hero">
      <div class="hero-inner">
        <h1>{{ .hero.title }}</h1>
        <p class="subhead">{{ .hero.subtitle }}</p>
        <div class="cta-group">
          <a href="{{ .hero.cta_primary.url | relLangURL }}" class="btn btn-primary">{{ .hero.cta_primary.text }}</a>
          <a href="{{ .hero.cta_secondary.url | relLangURL }}" class="btn btn-secondary">{{ .hero.cta_secondary.text }}</a>
        </div>
      </div>
    </section>
    <section class="home-sections">
      <div class="bento">
        <div class="card">
          <h3>{{ .sections.philosophy.title }}</h3>
          <p>{{ .sections.philosophy.summary }}</p>
          {{ if .sections.philosophy.items }}
          <ul>
            {{ range .sections.philosophy.items }}
            <li>{{ . }}</li>
            {{ end }}
          </ul>
          {{ end }}
          <a href="{{ .sections.philosophy.cta.url | relLangURL }}" class="readmore">{{ .sections.philosophy.cta.text }}</a>
        </div>
        <div class="card">
          <h3>{{ .sections.team.title }}</h3>
          <p>{{ .sections.team.summary }}</p>
          {{ if .sections.team.description }}
          <p>{{ .sections.team.description }}</p>
          {{ end }}
          <a href="{{ .sections.team.cta.url | relLangURL }}" class="readmore">{{ .sections.team.cta.text }}</a>
        </div>
        <div class="card">
          <h3>{{ .sections.news.title }}</h3>
          <p>{{ .sections.news.summary }}</p>
          <a href="{{ .sections.news.cta.url | relLangURL }}" class="readmore">{{ .sections.news.cta.text }}</a>
        </div>
      </div>
    </section>
    {{ else }}
    {{ warnf "Homepage data not found for language %s" $lang }}
    {{ end }}
  {{ else }}
  {{ warnf "No homepage data found" }}
  {{ end }}
{{ end }}
