# Homepage Restoration Plan

## Goal
Bring back the localized hero and card content on the home page while keeping the new i18n/data cleanup in place, matching the previously functional design.

## Current Findings
- Current template (`themes/atomic-core/layouts/index.html:2`) tries to load locale data via `index .Site.Data.homepage $lang`, but `.Site.Data.homepage` no longer exposes language keys after removing `data/homepage.yaml`. Build output (`public/index.html`) shows the `<main>` block empty, indicating the lookup resolves to `nil` and the guarded block never renders.
- Previous implementation (before cleanup) relied on a single `data/homepage.yaml` with the original hero/cards copy, so the layout rendered correctly even without per-language branching.
- Language-specific YAML files (`data/homepage.en.yaml`, `.fr.yaml`, `.zh-cn.yaml`) still contain the expected content, so the issue lies in how Hugo surfaces them, not missing copy.

## Proposed Tasks
1. **Restore data binding**
   - Either revert to using `.Site.Data.homepage` directly (letting Hugo auto-select the `.en/.fr/.zh-cn` variants) or move the localized data files under `data/homepage/en.yaml` structure so `index .Site.Data.homepage $lang` returns the correct map.
   - Add a defensive `with` block around `$data.hero` to avoid empty anchors if a locale file goes missing.
2. **Verify against original design**
   - Compare with the last working build (pre-cleanup) to ensure hero title, subtitle, CTAs, and three cards regain their typography and spacing.
   - Run `hugo server -D --port 1314` for manual QA across all locales and confirm cards mirror the prior layout.
3. **Document and guard**
   - Capture the chosen data-loading convention in `CLAUDE.md` (e.g., “keep localized homepage data under `data/homepage/<lang>.yaml`”).
   - Optionally add a build-time warning partial/log when `$data` is empty to surface regressions sooner.

## Open Questions
- Should we reinstate a base `data/homepage.yaml` as a fallback for future locales, or rely on the new per-language directory structure?
- Do we need automated checks (e.g., a simple Hugo assert partial) to flag missing keys rather than silently rendering nothing?
