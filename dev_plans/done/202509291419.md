# Homepage Data Regression Plan

## Goal
Restore localized hero and card content on the homepage after removing the default `data/homepage.yaml`, and tighten i18n usage so future localization toggles remain safe.

## Current Findings
- `themes/atomic-core/layouts/index.html:2` still sets `{{ $data := .Site.Data.homepage }}`. With only per-locale files (`data/homepage.en.yaml`, `.fr.yaml`, `.zh-cn.yaml`) present, that lookup now resolves to an empty map for every language, leaving hero text, CTA URLs, and card copy blank in the rendered HTML.
- The build succeeds (`hugo --panicOnWarning`), so there’s no runtime error flagging the missing data—content simply renders empty.
- We now rely entirely on localized data files; no fallback exists if a locale-specific file is missing or misnamed.

## Proposed Tasks
1. **Refactor data lookup**
   - Adjust `index.html` to retrieve the locale-specific map with a safe fallback, e.g. `index .Site.Data.homepage .Site.Language.Lang` and `default`ing to English when localized content is absent.
   - Confirm nested fields (hero, sections) exist before rendering to avoid empty anchors or headings.
2. **Regression verification**
   - Run `hugo server -D --port 1314` for manual spot checks across `/`, `/fr/`, and `/zh-cn/` to ensure hero text, summaries, list items, and CTAs reappear.
   - Execute `hugo --panicOnWarning` to validate no template errors after the lookup change.
3. **Follow-up enhancements**
   - Wire the skip link and language toggle labels to `i18n` keys now that the compliance data set is gone, keeping localization focused in translation catalogs.
   - Document the new lookup pattern (and fallback behavior) in `README.md` or `CLAUDE.md` so future contributors know to add locale-specific data files.

## Open Questions
- Should we add a build-time sanity partial (e.g., warn when `homepage` data is missing required keys) to catch silent regressions earlier?
- Do we want per-locale fallbacks beyond English (e.g., default to `.Site.Params` values) for partially translated markets?
